# Gmail API Proxy

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å –Ω–∞ Rust –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Gmail API. –°–æ–∑–¥–∞–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Bubble.io, —É–ø—Ä–æ—â–∞—è –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∏—Å–µ–º.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **GET /health** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞
- **GET /api/messages** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∏—Å–µ–º (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- **GET /api/messages/:id** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Å—å–º–∞ –≤ —á–∏—Å—Ç–æ–º JSON —Ñ–æ—Ä–º–∞—Ç–µ (–ø–∞—Ä—Å–∏–Ω–≥ MIME)
- **POST /api/messages/send** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
1. **x-api-key** - –∑–∞—â–∏—Ç–∞ —Å–∞–º–æ–≥–æ API (–∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `APP_SECRET_KEY`)
2. **x-google-token** - OAuth2 —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Gmail

## üì¶ –î–µ–ø–ª–æ–π –Ω–∞ Easypanel

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- `APP_SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∑–∞—â–∏—Ç—ã API

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
- `RUST_LOG` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `info`)
- `PORT` - –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `3000`)

### 2. –ó–∞–ø—É—Å–∫

Easypanel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ –∑–∞–π–º–µ—Ç 2-3 –º–∏–Ω—É—Ç—ã.

## üõ† –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–±–æ—Ä–∫–∞
cargo build

# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
export APP_SECRET_KEY="your-secret-key"
cargo run

# –°–±–æ—Ä–∫–∞ production –æ–±—Ä–∞–∑–∞
docker build -t gmail-api-proxy .
docker run -p 3000:3000 -e APP_SECRET_KEY=your-secret-key gmail-api-proxy
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ Bubble.io

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API Connector

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –≤ Bubble
2. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
   - `x-api-key: <–≤–∞—à APP_SECRET_KEY>`
   - `x-google-token: <OAuth —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>`

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å–ø–∏—Å–∫–∞ –ø–∏—Å–µ–º

```
GET https://your-service.com/api/messages?label_ids=INBOX&max_results=50
```

### –ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∏—Å—å–º–∞

```
GET https://your-service.com/api/messages/abc123xyz
```

–û—Ç–≤–µ—Ç:
```json
{
  "id": "abc123xyz",
  "subject": "–¢–µ–º–∞ –ø–∏—Å—å–º–∞",
  "from": "sender@example.com",
  "to": "recipient@example.com",
  "date": "2026-01-27T10:00:00Z",
  "snippet": "–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ...",
  "body_text": "–¢–µ–∫—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è",
  "body_html": "<html>...</html>",
  "attachments": [
    {
      "filename": "document.pdf",
      "content_type": "application/pdf",
      "size": 12345
    }
  ]
}
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞

```
POST https://your-service.com/api/messages/send
Content-Type: application/json

{
  "to": "recipient@example.com",
  "subject": "–¢–µ–º–∞",
  "body": "<p>HTML —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∏—Å—å–º–∞</p>"
}
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Axum** - –±—ã—Å—Ç—Ä—ã–π web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Reqwest** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Gmail API
- **mail-parser** - –ø–∞—Ä—Å–∏–Ω–≥ MIME —Å—Ç—Ä—É–∫—Ç—É—Ä
- **Tokio** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π runtime

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
